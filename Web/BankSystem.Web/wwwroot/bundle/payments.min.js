(function(){setTimeout(function(){let n=$("#payBtn");n.prop("disabled",!1);n.text(payBtnText)},3e3)})();$("#payBtn").click(function(){function t(t){$("#cancelBtn").removeClass("disabled");n.addClass("btn-danger");n.html('<i class="fas fa-times"><\/i> Failed');let i=$("#errAlert");i.text(t);i.slideDown();$("#accountPicker").prop("disabled",!1);setTimeout(function(){n.removeClass("btn-danger");n.addClass("btn-primary");n.text(payBtnText);n.prop("disabled",!1)},3e3)}let n=$("#payBtn");window.onbeforeunload=function(){return"Please do not close this page until your payment is processed."};$("#cancelBtn").addClass("disabled");n.prop("disabled",!0);n.html('<i class="fas fa-circle-notch fa-spin"><\/i> Processing');$.ajax({url:"/payments/payasync",type:"post",data:$("#paymentForm").serialize()}).always(function(){n.removeClass("btn-primary");window.onbeforeunload=function(){}}).fail(function(){t("Payment failed. Please try again later.")}).done(function(i){i.success?(n.addClass("btn-success"),n.html('<i class="fas fa-check"><\/i> Success'),setTimeout(function(){let n=$('<form action="'+i.returnUrl+'" method="post"><input type="hidden" name="data" value="'+i.data+'" /><\/form>');$("body").append(n);n.submit()},1e3)):t(i.errorMessage)});$("#accountPicker").prop("disabled",!0)});